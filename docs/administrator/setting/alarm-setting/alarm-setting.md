# 알람 설정

# 메일 전송 설정(SMTP)


**메일 전송 설정(SMTP)** 메뉴에서는 시스템이 `CRITICAL` 등급의 이벤트를 감지했을 때,  
관리자에게 자동으로 이메일 알람을 전송하기 위해 **SMTP 서버 정보를 설정**할 수 있습니다.  

이 페이지에서는 메일 서버 주소, 포트, 보안 연결 방식, 발신 계정 정보를 등록하고  
설정이 올바른지 **연결 테스트** 기능을 통해 검증할 수 있습니다.  
또한 필요 시 **설정 초기화**를 통해 SMTP 정보를 제거하여 메일 알람 기능을 비활성화할 수 있습니다.

> 💡 **공통 조건:** SMTP 설정이 존재하지 않으면 “편집 버튼을 눌러 설정을 추가해주세요.” 문구가 표시되며, `연결 테스트` 및 `설정 초기화` 버튼은 비활성화됩니다.

---

## SMTP 편집

SMTP 설정은 편집 화면에서 입력합니다. 모든 항목은 필수 입력 값입니다.

### 기본 정보
- **SMTP 서버명**: 메일 발송용 서버 주소를 입력합니다. 예: smtp.example.com 
- **SMTP 포트**: 서버 포트 번호를 입력합니다.
- **발신자 이메일 주소**: 시스템에서 메일을 발송할 실제 계정 주소입니다.
- **발신자 이메일 비밀번호**: 발신자 이메일 계정의 로그인 비밀번호 또는 앱 비밀번호입니다.
- **보안 연결**: `사용 안 함`, `SSL`, `StartTLS` 중 선택합니다.

### 입력 필드 유효성
| 필드 | 허용 값 및 형식 | 검증 규칙 및 제한 | 비고 |
|------|------|------|------|
| **SMTP 서버명** | 영문/숫자/`.` | - |  필수 |
| **SMTP 포트** | 1–65535 범위의 포트 번호 | 숫자만 입력 가능 | 필수 |
| **발신자 이메일 주소** | 영문/숫자/`@` | 이메일 주소 형식 | 필수 |
| **발신자 이메일 비밀번호** | 영문/숫자/특수문자 | 저장 맟 편집을 위해 재입력 필요 | 필수 |
| **보안 연결** | `사용 안 함` \| `SSL` \| `StartTLS`| 값 중 하나를 선택해야함 | 필수 |



### 설정 절차
1. `편집` 버튼을 클릭하여 편집 페이지로 이동합니다.  
2. 위 항목을 모두 입력합니다.
3. 모든 필드가 올바르게 입력되면 `편집` 버튼이 활성화되어, 입력한 내용을 저장할 수 있습니다.
4. 저장 후 “메일 전송 설정(SMTP) 편집 완료” 메세지가 표시됩니다.
5. 설정이 완료되면 `연결 테스트` 기능으로 정상 작동 여부를 확인할 수 있습니다.

> ⚠️ **주의:** `SMTP 서버명`에는 http:// 등의 프로토콜을 포함하지 않습니다.

> ⚠️ **주의:** `발신자 이메일 비밀번호`는 암호화되어 저장되며, 수정 시 다시 입력해야 합니다.

---

## SMTP 연결 테스트

SMTP 설정이 완료된 후 실제 이메일이 정상적으로 발송되는지 검증합니다.

### 테스트 절차
1. `연결 테스트` 버튼을 클릭합니다.  
2. `SMTP 연결 테스트` 대화창에서 `수신 이메일 주소`를 입력합니다.  
3. `발송` 버튼을 클릭합니다.  
4. 결과를 확인합니다.  
   - **성공 시:** “연결 테스트를 위한 메일 발송되었습니다.” 메세지가 표시되고, 수신자 메일함에 SMTP 연동 확인 메일이 도착합니다.  
   - **실패 시:** 오류 메세지가 표시되며, SMTP 정보(서버, 포트, 인증정보 등)를 다시 확인해야 합니다.  

> 💡 **참고:** 테스트 메일은 수신까지 약 10초 정도 소요될 수 있습니다.  
> 💡 **참고:** 스팸함으로 분류될 수 있으므로, 메일이 보이지 않을 경우 스팸함을 확인하세요.


---

## SMTP 설정 초기화

기존 SMTP 설정을 삭제하고 메일 알람 기능을 비활성화할 수 있습니다.

### 초기화 절차
1. `설정 초기화` 버튼을 클릭합니다.  
2. “모든 설정을 초기화하시겠습니까?” 확인 팝업이 표시됩니다.  
3. `초기화` 버튼을 클릭하면 SMTP 설정이 즉시 삭제됩니다.  
4. 삭제 완료 후 “설정이 초기화되었습니다.” 알람이 표시되며,  
   화면이 초기 상태로 전환되고 “편집 버튼을 눌러 설정을 추가해주세요.” 문구가 다시 표시됩니다.

> ⚠️ **주의:** 초기화 후에는 이메일 알람이 전송되지 않습니다.

> ⚠️ **주의:** 초기화 작업은 되돌릴 수 없습니다.

---

## 주의사항
- SMTP 설정 후에는 반드시 `연결 테스트`를 통해 정상 동작 여부를 확인해야 합니다.  
- Gmail 등 외부 메일 서비스를 사용하는 경우 **앱 비밀번호**를 발급받아 입력해야 할 수 있습니다.  
- 관리자 이메일 주소가 올바르게 등록되어야 알람을 받을 수 있습니다.  
- SMTP 설정이 올바르지 않으면 이벤트 감지 시에도 이메일 알람이 발송되지 않습니다.
