# 보안그룹 템플릿
**보안그룹 템플릿(Security Group Template)** 은 보안그룹을 생성할 때마다 규칙을 일일이 입력하지 않도록, 보안 성격에 맞춘 규칙들을 미리 템플릿으로 정의해두고 프로젝트 단위에서 필요한 템플릿들을 조합해 보안그룹을 구성할 수 있게 해주는 기능입니다.

## 보안그룹 템플릿 목록
### 주요 작업
- `생성`: 새로운 보안그룹 템플릿을 생성합니다.
- `편집`: 선택한 1개 보안그룹 템플릿의 설정을 편집할 수 있습니다.
- `삭제`: 선택한 보안그룹 템플릿을 삭제합니다. 

> 💡 **참고:** 프로젝트 보안그룹과 다르게, 모든 인바운드 트래픽 거부, 모든 아웃바운드 트래픽 거부를 기본으로 설정됩니다. 

### 테이블 컬럼
| 컬럼 | 설명                                   |
|------|--------------------------------------|
| **이름** | 보안그룹 템플릿의 이름입니다. 클릭 시 상세 화면으로 이동합니다. |
| **인바운드 규칙 / 아웃바운드 규칙 수** | 보안그룹 템플릿의 인바운드 규칙 수와 아웃바운드 규칙 수입니다.  |
| **설명** | 보안그룹 템플릿의 설명입니다.                     |
| **생성 일시** | 보안그룹 템플릿이 생성된 날짜와 시간입니다.             |

---

## 보안그룹 템플릿 상세
### 상단 요약
- **이름**: 보안그룹의 이름입니다.
- **인바운드 규칙 수**: 보안그룹의 인바운드 규칙 수입니다.
- **아웃바운드 규칙 수**: 보안그룹의 아웃바운드 규칙 수입니다.
- **설명**: 보안그룹의 설명입니다.
- **생성 일시**: 보안그룹이 생성된 날짜와 시간입니다.

### 하단 탭
#### **인바운드 규칙**
보안그룹 템플릿의 수신(Ingress) 트래픽 규칙 목록을 표시합니다.  
각 규칙은 타입(프로토콜), 소스(CIDR 또는 보안그룹), 단일 포트 혹은 포트 범위, 설명으로 구성되며, 모든 규칙은 허용 동작입니다.  
보안그룹 템플릿은 **상태 저장(Stateful)** 방식으로 동작하며, 명시된 트래픽만 허용합니다.

`편집` 버튼을 클릭하면 인바운드 규칙들을 수정할 수 있는 규칙 편집 화면으로 이동합니다. (규칙 편집 가이드는 아래 **[보안그룹 템플릿 규칙 편집]** 항목 참고)

- **프로토콜**: 인바운드 프로토콜입니다. (예: TCP, UDP, ICMP, ALL)
- **IP/CIDR**: 인바운드 IP 주소 / CIDR 입니다.
- **포트**: 인바운드 포트로 단일 포트 또는 포트 범위가 표시됩니다.
- **설명**: 인바운드 규칙의 설명입니다.

#### **아웃바운드 규칙**
송신(Egress) 트래픽 규칙 목록입니다. 구성은 인바운드와 동일합니다.

`편집` 버튼을 클릭하면 아웃바운드 규칙들을 수정할 수 있는 규칙 편집 화면으로 이동합니다.

- **프로토콜**: 아웃바운드 프로토콜입니다. (예: TCP, UDP, ICMP, ALL)
- **IP/CIDR**: 아웃바운드 IP 주소 / CIDR 입니다.
- **포트**: 아웃바운드 포트로 단일 포트 또는 포트 범위가 표시됩니다.
- **설명**: 아웃바운드 규칙의 설명입니다.

---

## 보안그룹 템플릿 생성
보안그룹 템플릿 생성 시 규칙을 같이 등록할 수도, 보안그룹 템플릿만 생성할 수도 있습니다. 
보안그룹 템플릿 상세를 통해 규칙을 등록하거나, 변경할 수 있으며 해당 템플릿을 사용하여 기 생성된 프로젝트 보안그룹에 영향을 주지 않습니다.  
### 1. 기본 정보
- **이름**: 보안그룹 템플릿의 이름을 입력합니다. 보안그룹 템플릿 간에 중복된 이름을 가질 경우, 생성이 제한됩니다.
- **설명**: 보안그룹 템플릿에 대한 설명을 입력합니다.

### 2. 규칙 설정
인바운드 또는 아웃바운드 규칙을 추가 또는 삭제합니다.
- **프로토콜**: TCP / UDP / ICMP / ALL 중 하나를 선택합니다. 
- **IP/CIDR**: IPv4 CIDR (예: 0.0.0.0/0) 를 입력합니다. 디플트는 모든 IP/CIDR 입니다.  
- **포트**: 단일 번호 또는 범위 (예: 22, 80-8080) 를 입력합니다. 
- **설명**: 규칙에 대한 설명을 입력합니다. (선택 사항)

### 입력 필드 유효성
| 필드                  | 허용 값                       | 검증 규칙                              | 비고 |
|---------------------|----------------------------|------------------------------------|---|
| **이름** | 영문/숫자/하이픈(-)/언더스코어(_) | 최대 80자, 공백 불가 | **필수** |
| **설명** | 문자열 | 최대 200자 | **필수** |
| **프로토콜** | TCP / UDP / ICMP / ALL | UI에서 지정된 값 중 하나 선택 | **필수** |
| **IP/CIDR** | IPv4 CIDR (예: 0.0.0.0/0) | 올바른 CIDR 형식 | **필수** |
| **포트** | 단일 번호 또는 범위 (예: 22, 80-8080) | 1–65535 값, 범위는 `-` 가능 | **필수** |
| **설명** | 문자열 | 최대 200자 | 선택 |

---

## 보안그룹 템플릿 편집
보안그룹 템플릿의 이름과 설명을 변경할 수 있습니다. 

| 컬럼 | 설명                                                    |
|------|-------------------------------------------------------|
| **이름** | 보안그룹 템플릿의 이름을 변경할 수 있습니다. 보안그룹 템플릿 간에 중복되면 편집이 제한됩니다. |
| **설명** | 보안그룹 템플릿에 대한 설명을 용도에 맞게 변경할 수 있습니다.                   |

---

## 보안그룹 템플릿 규칙 편집
보안그룹의 인바운드 또는 아웃바운드 규칙을 `추가`, `편집`, `삭제`할 수 있습니다.  
`규칙 추가` 버튼을 통해 새로운 규칙을 만들고, 기존 규칙을 수정할 수 있습니다.  
프로토콜(TCP, UDP, ICMP, ALL), 포트, 설명을 변경할 수 있으며 추가와 편집 항목은 동일합니다.

### 입력 필드 유효성
| 필드 | 허용 값 | 검증 규칙 | 비고 |
|------|----------|------------|------|
| **프로토콜** | TCP / UDP / ICMP / ALL | UI에서 지정된 값 중 하나 선택 | **필수** |
| **IP/CIDR** | IPv4 CIDR (예: 0.0.0.0/0) | 올바른 CIDR 형식 | **필수** |
| **포트** | 단일 번호 또는 범위 (예: 22, 80-8080) | 1–65535 값, 범위는 `-` 가능 | **필수** |
| **설명** | 문자열 | 최대 200자 | 선택 |

> ⚠️ **편집 제한** <br>
> - 변경 내역이 없거나 기존 규칙과 중복되는 경우 `편집`이 제한됩니다.  
> - 규칙 중복 여부는 프로토콜 + IP/CIDR + 포트 조합으로 판단합니다.  
> - 보안그룹 템플릿 규칙은 최대 60개까지 설정할 수 있습니다.  
> - 규칙 변경은 보안그룹 템플릿 상세 화면에서 수행해야 합니다.

> 💡 **참고:** 보안그룹 템플릿 규칙 편집은 프로젝트 보안그룹의 템플릿 사용 여부와 관계없이 편집이 가능하며, 영향을 주지 않습니다. 
> **상태 저장(Stateful)** 방식으로 동작하며, 인바운드에서 허용된 트래픽의 응답은 아웃바운드 규칙 없이 자동 허용됩니다.

---

## 보안그룹 템플릿 삭제
삭제는 **하나씩 선택하여 실행**할 수 있습니다.  
삭제할 보안그룹 템플릿을 선택하고 `삭제` 버튼을 누르면 확인 창이 나타나며, 확인 시 삭제됩니다.

### 주의사항
> 💡 **참고:** 보안그룹 템플릿 삭제는 프로젝트 보안그룹의 템플릿 사용 여부와 관계없이 삭제가 가능하며, 영향을 주지 않습니다. 
