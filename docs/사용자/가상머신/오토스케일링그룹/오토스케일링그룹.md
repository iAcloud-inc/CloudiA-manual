# 오토 스케일링 그룹

오토 스케일링 그룹은  가상 머신의 리소스 지표(임계치)를 추적하여 가상 머신(Instance)의 개수를 자동으로 증가 또는 감소시키는 기능입니다.

가상 머신 자원 사용률이 일정 범위에 도달하였을 때 인스턴스 수를 조절하여 안정적인 서비스 운영이 가능합니다. 예를 들어, CPU 사용량이 높아지면 인스턴스를 추가로 생성하며, 낮아지면 인스턴스를 제거함으로써 성능과 비용을 효율적으로 관리할 수 있습니다.

해당 페이지에서는 오토 스케일링 그룹의 조회, 생성, 삭제 기능이 사용 가능합니다.

## 오토 스케일링 그룹 목록 조회

**[가상 머신] > [오토 스케일링 그룹]** 메뉴를 선택하여 오토 스케일링 그룹 목록 조회 페이지로 이동합니다. 목록 조회 페이지에서는 현재 프로젝트에서 생성한 오토 스케일링 그룹의 요약 정보를 확인할 수 있습니다.

오토 스케일링 그룹 목록의 주요 칼럼은 아래와 같습니다.

| 컬럼 | 설명 |
| --- | --- |
| 이름 | 오토 스케일링 그룹의 이름입니다. |
| ID | 오토 스케일링 그룹에 부여된 고유 식별자입니다. |
| 시작 템플릿 | 오토 스케일링 그룹이 가상 머신 인스턴스를 생성할 때 사용하는 시작 템플릿의 이름입니다. |
| 인스턴스 상태 | 현재 그룹 내 인스턴스의 실행 중인 개수/전체 개수를 나타냅니다. 예를 들어 `3/5`는 총 5개의 인스턴스 중 3개가 현재 정상 실행 중임을 의미합니다. |
| 상태 | 오토 스케일링 그룹의 상태를 표시합니다. 예를 들어 `생성 중`, `정상 실행 중`, `업데이트 중`, `삭제 중`, `일시 중지됨`, `스케일 인 진행 중`, `스케일 아웃 진행 중` 등의 상태를 아이콘과 텍스트로 보여줍니다. |
| 생성 일시 | 해당 오토 스케일링 그룹이 처음 생성된 날짜와 시간입니다. |

화면 상단의 검색창을 이용하여 오토 스케일링 그룹 이름으로 필터링할 수 있습니다.


## 오토 스케일링 그룹 생성

오토 스케일링 그룹을 생성하려면 오토 스케일링 그룹 목록 페이지에서 [생성] 버튼을 클릭하여 **[오토 스케일링 그룹 생성]** 페이지로 이동합니다. **[오토 스케일링 그룹 생성]** 페이지에서 오토 스케일링 그룹 생성을 위한 기본 정보를 입력하고 **[생성]** 버튼을 클릭하여 오토 스케일링 그룹을 생성합니다.

1. 기본 정보
- 이름 : 오토 스케일링 그룹의 이름을 지정합니다.
- 시작 템플릿 : 오토 스케일링 그룹에서 가상 머신 인스턴스 생성 시 사용할 시작 템플릿을 선택합니다.
- 타겟 그룹 : 로드 밸런서와 연동하기 위해 타겟 그룹을 함께 만들지 선택합니다. (해당 타겟 그룹에 오토 스케일링 그룹에서 관리하는 가상 머신 인스턴스들이 자동으로 등록됩니다.)
- 타겟 그룹 프로토콜 : 타겟 그룹에서 사용할 프로토콜을 지정합니다. 목록에서 TCP 또는 UDP를 선택할 수 있습니다.
- 포트 번호 : 타겟 그룹이 트래픽을 전달할 포트 번호를 입력합니다.
- 설명 : 오토 스케일링 그룹에 대한 설명이나 메모를 입력합니다.

2. 그룹 정보
- 최소 용량 : 오토 스케일링 그룹이 유지해야 할 최소 인스턴스 개수를 지정합니다. 자원 사용량이 임계값 미만인 상황에서도 최소 용량 미만으로 인스턴스를 줄이지 않습니다.
- 최대 용량 : 이 그룹이 허용하는 최대 인스턴스 개수를 지정합니다. 자원 사용량이 임계값을 초과한 상황에서도 최대 용량을 초과하여 인스턴스를 늘리지 않습니다.|
- 원하는 용량 : 처음에 실행할 초기 인스턴스 개수를 설정합니다. 원하는 이 값만큼 오토 스케일링 그룹 생성 시 인스턴스를 시작합니다. 이후 오토 스케일링에 의해 인스턴스 수가 동적으로 변경될 수 있습니다.

3. 상태 검사
- 스케일 간격 : 오토 스케일링 그룹이 인스턴스를 추가하거나 제거한 후 다음 용량 조정을 허용할 시간 간격을 입력합니다. 해당 기간 동안 추가적인 용량 조정을 수행하지 않습니다.

4. 조정 정책
- 지표 유형 : 오토 스케일링의 기준이 될 가상 머신 자원 지표를 선택합니다.
- 스케일 인 대상값 : 인스턴스 감소(스케일 인) 여부를 결정하는 임계값입니다. 오토 스케일링 그룹의 사용량의 평균치가 스케일 인 대상값 이하로 떨어지면 인스턴스를 종료합니다.
- 스케일 아웃 대상값 : 인스턴스를 증가(스케일 아웃) 시킬 트리거 값입니다. 선택한 지표의 평균치가 스케일 인 대상값 이상으로 상승하면 새로운 인스턴스를 추가합니다.

모든 필수 정보를 입력하고 **[생성]** 버튼을 누르면 오토 스케일링 그룹 생성 요청이 완료됩니다.

오토 스케일링 그룹의 생성이 진행 중이면 상태가 `생성 중`으로 표시되며, 잠시 후 목록에 새로운 그룹이 추가되고 상태가 `실행 중`으로 바뀝니다. 이제 CloudiA가 설정된 정책에 따라 인스턴스를 자동으로 관리하기 시작합니다.

## 오토 스케일링 그룹 편집

오토 스케일링 그룹 목록 페이지에서 편집할 오토 스케일링 그룹을 선택하고 [편집] 버튼을 클릭하여 **[오토 스케일링 그룹 편집]** 페이지로 이동합니다.

**[오토 스케일링 그룹 편집]** 페이지는 **[오토 스케일링 그룹 생성]** 페이지와 동일한 화면으로 구성됩니다.

일부 항목을 제외하고 오토 스케일링 그룹 생성 시 입력한 항목을 변경할 수 있습니다. 원하는 항목을 변경한 후 [편집] 버튼을 클릭하여 편집 요청을 할 수 있습니다.

**최소 용량**, **최대 용량**을 변경한 경우 그 범위 내에서 추후 인스턴스 증설이 가능해지며, **원하는 용량**을 변경한 경우 인스턴스 수를 맞추기 위한 작업이 진행됩니다.

### 편집 시 참고 사항
- **원하는 용량** 조정 시 현재 그룹의 가상머신 인스턴스 개수를 **원하는 용량** 만큼 높이거나 낮출 수 있습니다.
- 이 방법으로 일시적으로 오토 스케일링 그룹의 용량을 수동으로 조정할 수 있지만, `일시 중지` 상태가 아닌 오토 스케일링 그룹은 다시 자동 임계치 정책에 따라 동작하게 됩니다.

### 편집 시 주의 사항
- 시작 템플릿과 타겟 그룹 생성 여부는 변경할 수 없습니다.
- 타겟 그룹의 프로토콜과 포트는 변경할 수 없습니다.

## 오토 스케일링 그룹 상세 확인

사용자는 **[가상 머신] > [오토 스케일링 그룹]** 탭에 접근한 후, 목록에서 조회하고자 하는 오토 스케일링 그룹의 이름을 선택하여 오토 스케일링 그룹의 상세 정보 조회 페이지로 이동할 수 있습니다.

오토 스케일링 그룹의 상세 정보 조회 페이지의 상단에는 상세 정보가 표시됩니다.

각 항목은 오토 스케일링 그룹 생성 시 설정한 내용이며, 아래와 같이 표시됩니다:

- 이름 : 오토 스케일링 그룹의 이름입니다.
- 상태 : 오토 스케일링 그룹의 상태 아이콘과 텍스트를 표시합니다.
- 시작 템플릿 : 오토 스케일링 그룹에서 가상 머신 인스턴스 생성에 사용하는 시작 템플릿의 이름과 ID를 표시합니다.
- 상태 : 오토 스케일링 그룹의 상태를 표시합니다.
- 인스턴스 상태 : 현재 그룹 내 인스턴스의 실행 중인 개수/전체 개수를 나타냅니다. (예: `3/5개`)
- 타겟 그룹 : 이 그룹이 생성할 때 함께 만든 타겟 그룹의 이름과 ID가 표시됩니다. (타겟 그룹을 생성하지 않았다면 `-` 로 표시됩니다.)
- 최소 용량 : 오토 스케일링 그룹의 최소 용량을 표시합니다.
- 최대 용량 : 오토 스케일링 그룹의 최대 용량을 표시합니다.
- 스케일 간격 : 오토 스케일링 그룹의 스케일 간격을 표시합니다.
- 생성 일시 : 오토 스케일링 그룹을 생성한 날짜와 시간입니다.
- 설명 : 오토 스케일링 그룹의 설명입니다.

페이지 하단에는 [인스턴스 탭]와 [조정 정책 탭]을 선택하여 가상머신 인스턴스 정보와 조정 정책을 확인할 수 있습니다.

### 하단 탭 (인스턴스)

- 이름 : 인스턴스 이름 (Auto Scaling에서 생성한 인스턴스의 이름은 자동으로 지정됩니다.)
- ID : 인스턴스의 고유 ID
- IP : 인스턴스에 할당된 IP 주소
- 상태 : 인스턴스의 현재 상태 (예: `실행 중`, `종료` 등)
- vCPU : 인스턴스의 가상 CPU 개수
- 메모리 : 인스턴스의 메모리 크기
- 생성 일시 : 해당 인스턴스가 생성된 시간

### 하단 탭 (조정 정책)

- 리소스 타입 : 오토 스케일링 그룹 용량 조정 기준이 되는 가상 머신 자원의 종류입니다.
- 대상값 : 오토 스케일링 그룹의 자원 사용량 평균치가 도달하였을 때 용량 조정이 발생하는 임계값입니다.
- 조정 정책 : 오토 스케일링 그룹의 자원 사용량 평균치가 대상값에 도달하였을 때 오토 스케일링 그룹의 용량을 늘이거나 줄이고자 하는 정책입니다.


## 오토 스케일링 그룹 조정 정책 편집

오토 스케일링 그룹 상세 페이지에서 하단의 **[조정 정책]**탭을 선택하고 **[편집]** 버튼을 클릭하면 **[조정 정책 편집]** 모달이 나타납니다. 지표 유형, 스케일 인 대상값, 스케일 아웃 대상값을 변경하고 하단의 **[편집]** 버튼을 선택하여 변경 사항을 반영합니다. 변경 사항이 적용된 이후부터는 변경된 조건에 따라 오토 스케일링이 동작합니다.

### 오토 스케일링 그룹 일시 중지

오토 스케일링 목록 조회 페이지에서 오토 스케일링 그룹을 선택한 후 **[일시 중지]** 버튼을 클릭하면 해당 그룹의 상태가 `일시 중지`로 변경됩니다.

일시 중지된 오토 스케일링 그룹에서는 가상머신 인스턴스의 추가 생성이나 축소가 이루어지지 않습니다.

오토 스케일링 그룹의 일시 중지는 상태가 `실행 중`인 오토 스케일링 그룹에 대해 수행할 수 있습니다.

⚠️ 참고 : 일시 중지된 오토 스케일링 그룹에 대해 편집 기능을 사용하여 원하는 용량을 변경하여여 인스턴스 수가 조정할 수 있습니다.

### 오토 스케일링 그룹 재개

오토 스케일링 그룹 재개 기능은 일시 중지된 그룹에 대해 오토 스케일링을 활성화합니다.

오토 스케일링 목록 조회 페이지에서 오토 스케일링 그룹을 선택하고 **[재개]** 버튼을 누릅니다. 그룹 상태가 다시 `실행 중`으로 바뀌며, 설정된 조정 정책에 따라 오토 스케일링 기능이 다시 동작합니다.

### 오토 스케일링 그룹 삭제

오토 스케일링 그룹 목록에서 삭제하려는 그룹을 선택하고 상단의 **[삭제]** 버튼을 클릭합니다. 확인 대화상자에서 **[확인]**을 선택하면 삭제 절차가 진행됩니다.

오토 스케일링 그룹의 상태가 `삭제 중`으로 표시될 수 있습니다. 오토 스케일링 그룹 삭제는 해당 그룹에 속한 모든 가상머신 인스턴스를 종료하고 관련 리소스를 정리합니다.

오토 스케일링 그룹 생성 시 타겟 그룹을 생성한 경우 해당 타겟 그룹도 함께 삭제됩니다.

⚠️ 오토 스케일링 그룹 삭제 시 참고 : 오토 스케일링 그룹의 타겟 그룹이 로드 밸런서에 연결되어 있는 경우 삭제할 수 없습니다. 이때는 로드 밸런서의 설정에서 해당 타겟 그룹을 분리한 후 다시 시도하시기 바랍니다.
