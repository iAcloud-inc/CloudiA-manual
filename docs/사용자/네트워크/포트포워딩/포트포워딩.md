# 포트 포워딩 사용자 가이드

## 포트 포워딩 목록
**포트 포워딩** 목록 화면에서는 프로젝트 내 모든 포트 포워딩 항목을 확인하고 관리할 수 있습니다. 화면 상단 도구 모음에서 새 포트 포워딩을 [생성]할 수 있으며, 목록에서 항목을 선택하여 [편집] 또는 [삭제] 작업을 수행할 수 있습니다 (※ [편집]은 한 개의 항목 선택 시에만 활성화됩니다). 포트 포워딩 **이름**을 클릭하면 해당 포트 포워딩의 상세 화면으로 이동합니다.

포트 포워딩 목록 주요 컬럼은 다음과 같습니다:

| 컬럼         | 설명                                                       |
| ------------ | ---------------------------------------------------------- |
| **이름**     | 포트 포워딩의 표시 이름입니다. 클릭 시 해당 포트 포워딩 **상세** 화면으로 이동합니다. |
| **VPC**      | 포트 포워딩이 연결된 VPC 이름입니다.                         |
| **외부 IP**  | 포트 포워딩에 할당된 외부 IP 주소입니다.                     |
| **설명**     | 포트 포워딩에 대한 관리자 작성 설명입니다.                   |
| **생성 일시** | 포트 포워딩이 생성된 날짜와 시간입니다.                      |

> 💡 참고: 다중 선택하여 여러 포트 포워딩을 동시에 [삭제]할 수 있습니다.

### 포트 포워딩 상세
특정 포트 포워딩의 **이름**을 클릭하면 **포트 포워딩 상세** 화면으로 이동합니다. 상단에는 해당 포트 포워딩의 **상세 정보**가 요약되어 표시됩니다.

- **이름:** 포트 포워딩의 이름입니다.  
- **ID:** 포트 포워딩 리소스의 고유 식별자(ID)입니다.  
- **VPC:** 포트 포워딩이 속한 VPC 이름입니다.  
- **외부 IP:** 이 포트 포워딩에 사용 중인 외부 IP 주소입니다.  
- **설명:** 포트 포워딩에 대한 설명입니다.  
- **생성 일시:** 포트 포워딩이 생성된 날짜 및 시간입니다.

#### 하단 탭
아래 **규칙 정보** 섹션에서는 현재 포트 포워딩에 설정된 포트 포워딩 **규칙**들의 목록이 제공됩니다. 각 규칙은 외부에서 들어오는 특정 포트의 트래픽을 내부 자원으로 전달하는 설정을 나타냅니다. 규칙 정보 표의 우측 상단 [편집] 버튼을 클릭하면 규칙들을 수정할 수 있는 **규칙 편집** 화면으로 이동합니다.

규칙 정보 목록의 주요 컬럼은 다음과 같습니다:

| 컬럼            | 설명                                                           |
| --------------- | -------------------------------------------------------------- |
| **ID**          | 포트 포워딩 규칙의 고유 ID입니다.                                |
| **프로토콜**    | 트래픽 프로토콜 종류입니다. `TCP`, `UDP` 또는 `ALL`로 표시됩니다. `ALL`은 TCP와 UDP 모든 트래픽을 포함합니다. |
| **외부 포트**   | 외부 IP에서 트래픽을 수신하는 포트 번호입니다. 단일 포트 번호 또는 범위(예: `8000-8080`)로 표시됩니다. |
| **내부 리소스** | 트래픽이 전달될 대상 자원입니다. `인스턴스` 또는 `IP 주소`로 표시되며, `인스턴스`인 경우 대상 인스턴스의 이름과 ID가 표시됩니다. |
| **내부 IP**     | 내부 대상 자원의 IP 주소입니다 (인스턴스의 경우 선택된 네트워크 인터페이스 IP). |
| **내부 포트**   | 내부 자원이 트래픽을 수신할 포트 번호입니다.                    |
| **설명**        | 해당 규칙에 대한 설명입니다.                                    |

## 포트 포워딩 생성·편집
포트 포워딩을 새로 생성하거나 기존 포트 포워딩을 편집할 때는 동일한 화면 구성에서 **기본 정보**, **네트워크 정보** 및 **규칙 설정** 섹션을 통해 필요한 사항을 입력합니다. 생성 화면은 “**포트 포워딩 생성**”, 편집 화면은 “**포트 포워딩 편집**” 제목으로 표시됩니다.

#### 1. 기본 정보
- **이름** (필수): 포트 포워딩의 이름을 지정합니다. 영문 대소문자, 숫자, 하이픈(`-`), 밑줄(`_`) 문자만 사용할 수 있으며 최대 40자까지 입력 가능합니다. 프로젝트 내에서 중복되지 않는 이름을 권장합니다.  
- **설명** (선택): 포트 포워딩에 대한 설명을 입력합니다. 최대 200자까지 입력 가능하며, 이 필드는 포트 포워딩의 용도나 메모를 남길 때 사용합니다.

#### 2. 네트워크 정보 *(생성 모드 전용)*
- **VPC** (필수): 포트 포워딩을 설정할 대상 VPC를 선택합니다. 드롭다운 목록에서 프로젝트에 속한 VPC 중 하나를 선택해야 합니다.  
- **외부 IP 할당** (필수): 포트 포워딩에 사용할 외부 IP 주소를 결정합니다. [자동 할당]을 선택하면 사용 가능한 외부 IP가 자동으로 할당되며, [수동 할당]을 선택하면 드롭다운 목록에서 특정 외부 IP 주소를 직접 선택할 수 있습니다 (현재 **미사용** 상태의 외부 IP만 선택 가능).

> ⚠️ 주의: 포트 포워딩 **편집 모드**에서는 VPC와 외부 IP 주소를 수정할 수 없습니다. 또한, 포트 포워딩 **생성** 시에 규칙을 추가한 후에는 VPC 선택을 변경할 수 없습니다. VPC를 변경하려면 먼저 추가된 모든 규칙을 삭제해야 합니다.

#### 3. 포트 포워딩 규칙 설정
포트 포워딩에 포함될 규칙들을 정의합니다. 포트 포워딩 생성할 때 선택 사항이며, 이후에도 상세 화면의 **규칙 편집** 기능을 통해 추가하거나 변경할 수 있습니다.  

규칙 설정 섹션에서는 규칙 목록과 함께 [추가], [편집], [삭제] 버튼이 제공됩니다. **[추가]** 버튼을 클릭하면 새로운 규칙을 정의할 수 있는 **규칙 추가** 창이 열리며, **[편집]** 버튼은 선택한 규칙을 수정할 때 사용합니다 (규칙은 한 번에 하나만 편집 가능). **[삭제]** 버튼을 통해 선택한 규칙들을 목록에서 제거할 수 있습니다. 생성 화면에서 규칙을 여러 개 추가해두면, [생성]을 누를 때 이 모든 규칙이 함께 저장되어 적용됩니다.

포트 포워딩 규칙을 구성하는 필드는 다음과 같으며, 각 필드의 입력 규칙은 표와 같습니다:

| 필드             | 허용 값 및 범위                    | 검증 규칙 및 제한                          | 비고                     |
| ---------------- | ---------------------------------- | ------------------------------------------ | ------------------------ |
| **프로토콜**     | `TCP` / `UDP` / `ALL`              | 필수 선택 항목입니다. `ALL`은 TCP와 UDP를 모두 포함하며, 동일한 포트 범위에 대해 중복 프로토콜 규칙을 추가할 수 없습니다. |                          |
| **외부 포트**    | `1`–`65535` 범위의 포트 번호 또는 범위 <br/> (예: `80` 또는 `8000-8080` 또는 `8000:8080`) | 필수 입력입니다. 단일 포트 또는 포트 범위를 입력할 수 있습니다. 포트 범위의 경우 시작 포트가 끝 포트보다 작아야 하며 올바른 형식(`-` 혹은 `:`로 구분된 숫자)이어야 합니다. | 단일 외부 포트 → 단일 내부 포트 또는 동일한 크기의 포트 범위만 매핑 가능 |
| **내부 리소스**  | **인스턴스** 또는 **IP 주소**      | 필수 선택입니다. 인스턴스인 경우 드롭다운에서 대상 가상 머신을 선택하고, IP 주소인 경우 해당 VPC 내 유효한 IPv4 주소를 입력합니다. | 편집 시 변경 불가 |
| 내부 IP | VPC CIDR 내 IPv4 주소 | 내부 리소스를 IP 주소로 선택한 경우 필수 입력입니다. 선택한 VPC의 주소 범위(CIDR)에 속하는 유효한 IP여야 합니다. 인스턴스를 선택한 경우 해당 인스턴스의 네트워크 인터페이스 중 하나의 IP를 선택합니다. | 인스턴스를 선택한 경우 내부 타입 서브넷의 IP는 선택할 수 없습니다. |
| **내부 포트**    | `1`–`65535` 범위의 포트 번호 또는 범위 <br/> (예: `8080` 또는 `8000-8080` 또는 `8000:8080`) | 필수 사항은 아니며, 기본값으로 비워 둘 경우 외부 포트와 동일한 포트로 내부에 전달됩니다. 값을 입력하는 경우 단일 포트 또는 범위를 지정할 수 있으며, **외부 포트**가 범위인 경우 **내부 포트**도 포트 개수가 동일한 범위 또는 단일 포트여야 합니다. |                        |
| **설명**         | 최대 200자 문자열                 | 선택 입력입니다. 규칙에 대한 부가 설명이나 메모를 자유롭게 입력합니다. |                        |

> 💡 참고:
> - 외부 포트를 단일 값으로 지정한 경우 내부 포트도 비우거나 단일 값으로만 설정할 수 있습니다.  
> - 외부 포트가 범위이면 내부 포트를 비워 두어 **동일한 범위로 1:1 매핑**하거나, 시작·끝 포트를 대응시키는 동일한 개수의 범위로 입력해야 합니다. (예: 외부 `8080-8082` → 내부 `3000-3002` 가능)  
> - 외부 포트 단일 → 내부 포트 범위 설정은 불가능합니다.
> - 규칙 편집 시 기존 규칙의 **내부 리소스** 종류는 변경할 수 없습니다. (필요한 경우 해당 규칙을 삭제하고 새로 추가해야 합니다.)

입력한 규칙들이 유효하면 **규칙 목록**에 추가되며, 포트 포워딩 **생성 화면**에서는 [생성] 버튼을 눌러 포트 포워딩과 함께 모든 규칙을 저장합니다. **편집 화면**에서는 [편집] 버튼을 눌러 이름/설명을 수정할 수 있으며, 규칙 변경은 다음 섹션의 **규칙 편집** 기능을 사용합니다. [취소] 버튼을 누르면 변경 사항 없이 이전 화면으로 돌아갑니다.

## 포트 포워딩 규칙 편집

포트 포워딩이 생성된 이후 규칙을 추가하거나 수정하려면 **포트 포워딩 상세** 화면 하단의 [편집] 버튼을 통해 **포트 포워딩 규칙 편집** 화면으로 진입합니다. 규칙 편집 화면에서는 해당 포트 포워딩에 속한 모든 규칙들을 관리할 수 있습니다. 화면 상단에는 “**규칙 편집**” 제목과 함께 현재 포트 포워딩의 규칙 목록이 표 형태로 나열됩니다. 이 표에서는 규칙별 **ID**, **프로토콜**, **외부 포트**, **내부 리소스**, **내부 IP**, **내부 포트**, **설명** 정보를 보여주며, 각 컬럼의 의미는 앞서 상세 화면의 규칙 정보 표와 동일합니다.

규칙 편집 화면의 상단 도구 모음을 통해 규칙을 관리합니다. **[추가]** 버튼을 눌러 새로운 규칙을 추가할 수 있고, **[편집]** 버튼은 목록에서 하나 선택한 규칙을 편집할 때 사용됩니다. 또한 **[삭제]** 버튼을 이용해 여러 규칙을 동시에 제거할 수 있습니다.

**규칙 추가/편집** 창: 규칙을 추가하거나 수정할 때는 별도의 모달 창에서 상세 항목을 입력합니다. 입력 필드와 제약 사항은 **포트 포워딩 생성 시의 규칙 설정**과 동일합니다. 프로토콜(TCP/UDP/ALL), 외부 포트, 내부 리소스(인스턴스 또는 IP), 내부 IP, 내부 포트, 설명 항목을 순서대로 지정하고 [저장]을 클릭하면 규칙이 목록에 반영됩니다. (편집하는 경우 해당 규칙에 변경 사항이 적용됨)

모든 필요한 규칙 추가/편집 작업을 마쳤다면, **규칙 편집** 화면 하단의 [저장] 버튼을 눌러 변경된 규칙들을 적용합니다.

> ⚠️ 주의:
> - 하나의 외부 IP에 대해 **중복되거나 겹치는 포트 범위의 규칙을 생성할 수 없습니다.**  
> - `ALL` 프로토콜 규칙이 존재하면 해당 포트 범위에는 별도로 `TCP` 또는 `UDP` 규칙을 추가할 수 없습니다.  
> - 규칙 추가 시 중복되는 포트/프로토콜 조합이 감지되면 오류가 표시되며 저장이 제한됩니다.

## 포트 포워딩 삭제

목록 화면에서는 단일 혹은 여러 항목을 선택해 삭제할 수 있습니다. 포트 포워딩은 별도 조건 없이 삭제할 수 있습니다.

⚠️ **주의:** 포트 포워딩 삭제는 **복구할 수 없습니다.** 삭제 전에 반드시 해당 포트 포워딩의 사용 여부를 확인한 후 삭제하세요.

💡 참고: 포트 포워딩을 삭제하면 해당 포트 포워딩에 속한 모든 포트 포워딩 규칙도 함께 삭제됩니다.
