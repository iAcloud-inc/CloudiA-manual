# CloudiA 포트 포워딩 사용자 가이드

## 포트 포워딩 목록
CloudiA의 **포트 포워딩** 기능은 가상 인스턴스에 외부 IP를 통해 접속할 수 있도록 특정 포트를 내부 네트워크로 연결해 주는 설정입니다. 포트 포워딩 목록 화면에서는 현재 설정된 포트 포워딩들을 조회하고 관리할 수 있습니다.

### 도구 모음과 주요 작업
- **`생성`**: 새 포트 포워딩을 추가합니다. 클릭 시 **포트 포워딩 생성** 페이지로 이동합니다.  
- **`편집`**: 선택한 포트 포워딩의 이름이나 설명을 수정합니다. 포트 포워딩을 **하나만 선택한 경우에만** 활성화됩니다. 클릭 시 **포트 포워딩 편집** 페이지로 이동합니다.  
- **`삭제`**: 선택된 포트 포워딩 항목들을 삭제합니다. 포트 포워딩을 **한 개 이상 선택하면** 활성화되며, 클릭 시 확인창이 나타납니다. 다수의 포트 포워딩을 한 번에 삭제할 수 있습니다.  
- **검색 필드**: 화면 우측에서 포트 포워딩 **이름**으로 검색할 수 있습니다. 검색어 입력 후 엔터를 누르면 해당 이름을 포함한 항목들로 목록이 필터링됩니다. 정렬은 기본적으로 생성일시 기준이며, 컬럼 헤더를 클릭하여 정렬 기준을 변경할 수 있습니다.

> 💡 **공통 조건:** 포트 포워딩 항목을 **선택하면** 행이 강조 표시되며, 편집이나 삭제 등의 작업 버튼이 활성화됩니다. 편집은 단일 항목에만 수행 가능하며, 여러 항목을 동시에 선택한 경우 `편집` 버튼이 비활성화됩니다.

### 테이블 컬럼
포트 포워딩 목록은 다음 정보들을 컬럼으로 표시합니다:

| 컬럼           | 설명 |
|---------------|------|
| **이름**       | 포트 포워딩의 표시 이름입니다. 클릭하면 해당 **포트 포워딩 상세** 화면으로 이동합니다. |
| **VPC**      | 포트 포워딩이 연결된 가상 네트워크(VPC)의 이름입니다. |
| **외부 IP**    | 이 포트 포워딩에 할당된 외부 IPv4 주소입니다. 해당 IP로 외부에서 접근합니다. |
| **설명**       | 포트 포워딩에 대한 부가 설명입니다. |
| **생성 일시**   | 포트 포워딩이 생성된 날짜와 시간입니다. |

---

## 포트 포워딩 상세
포트 포워딩 상세 화면에서는 선택한 포트 포워딩의 세부 정보를 확인하고, 연결된 **포트 포워딩 규칙**들을 조회할 수 있습니다.

### 상단 요약
상단에는 포트 포워딩의 기본 정보가 요약되어 표시됩니다:

- **이름**  
- **ID**  
- **VPC**  
- **외부 IP**  
- **설명**  
- **생성 일시**

### 규칙 정보
포트 포워딩에 설정된 **포트 포워딩 규칙** 목록이 하단에 제공됩니다. 각 규칙은 외부 포트와 내부 대상 간의 매핑을 나타내며, 다음과 같은 컬럼으로 구성됩니다:

| 컬럼           | 설명 |
|---------------|------|
| **ID**        | 포트 포워딩 규칙의 고유 ID입니다. |
| **프로토콜**   | 규칙이 적용되는 프로토콜 유형입니다 (`TCP`, `UDP` 또는 `ALL`). |
| **외부 포트**  | 외부에서 접근하는 포트 번호 또는 포트 범위입니다. |
| **내부 자원**  | 트래픽을 전달할 내부 대상 자원입니다. |
| **내부 IP**   | 내부 자원의 IP 주소입니다. |
| **내부 포트** | 내부 자원이 수신할 포트 번호입니다. |
| **설명**      | 해당 규칙에 대한 설명입니다. |

> 💡 **참고:** 포트 포워딩 상세 화면에서는 규칙을 **조회**만 할 수 있으며, 규칙의 추가/삭제/수정은 우측 상단의 `편집` 버튼을 눌러 별도의 **규칙 편집** 화면에서 수행합니다.

---

## 포트 포워딩 생성·편집
포트 포워딩 생성 화면에서는 새로운 포트 포워딩을 설정할 수 있으며, 편집 화면에서는 기존 포트 포워딩의 일부 정보를 수정할 수 있습니다. 생성과 편집 절차, 입력 항목은 유사하며 다음과 같습니다.

### 1. 기본 정보
- **이름**: 포트 포워딩의 이름을 입력합니다. *(필수 항목)*  
- **설명**: 최대 200자까지 입력 가능하며 선택 사항입니다.

### 2. 네트워크 정보
- **VPC**: 드롭다운에서 대상 VPC 선택 *(필수)*  
- **외부 IP 할당**: `자동 할당` 또는 `수동 할당` 선택  
- **규칙**: 여러 개 추가/편집 가능  

#### 규칙 입력 항목
1. **프로토콜** – `TCP`, `UDP`, `ALL`  
2. **외부 포트** – 단일 값 또는 범위 (예: `8080`, `8000-8080`)  
3. **내부 자원 유형** – `인스턴스` 또는 `IP 주소`  
4. **내부 IP** – 인스턴스 공인망 IP 또는 직접 입력 IP  
5. **내부 포트** – 단일 값 또는 범위  
6. **설명** – 선택 사항  

> ⚠️ **주의:** VPC 변경은 기존 규칙이 모두 삭제되어야만 가능합니다.  
> 💡 **참고:** 편집 모드에서는 네트워크 정보는 수정할 수 없고, 규칙은 별도 규칙 편집 화면에서만 변경 가능합니다.

### 입력 필드 유효성

| 필드             | 허용 값 및 형식 | 검증 규칙 및 제한 | 비고 |
|------------------|----------------|------------------|------|
| **이름**         | 영문/숫자/-/_ , 최대 40자 | 첫 글자는 숫자 불가 | 필수 |
| **설명**         | 최대 200자 | - | 선택 |
| **VPC**          | 존재하는 VPC | 선택 필수 | 필수 |
| **외부 IP 할당** | 자동/수동 | 수동 시 사용 가능한 외부 IP 선택 | 필수 |
| **프로토콜**     | `TCP` / `UDP` / `ALL` | - | 필수 |
| **외부 포트**    | 0~65535 정수 또는 범위 | 시작 < 종료, 중복 불가 | 필수 |
| **내부 자원**    | 인스턴스 / IP 주소 | - | 필수 |
| **내부 IP**     | 유효 IPv4 | 선택 VPC CIDR 범위 내 | 필수 |
| **내부 포트**    | 0~65535 정수 또는 범위 | 외부 포트와 범위 일치 필요 | 필수 |
| **규칙 설명**    | 최대 200자 | - | 선택 |

> ⚠️ **주의:** 중복되는 포트 규칙은 허용되지 않습니다.  
