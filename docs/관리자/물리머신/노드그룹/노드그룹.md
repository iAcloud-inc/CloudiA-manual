# 노드 그룹
노드 그룹은 여러 물리 머신 노드들을 하나의 그룹으로 묶어 관리하기 위한 기능입니다. 예를 들어 물리 머신들을 용도별(테스트 서버군, 운영 서버군 등) 혹은 위치별(사이트 A, B 등)로 구분하여 그룹화해두면 자원을 체계적으로 관리할 수 있습니다. CloudiA의 노드 그룹 메뉴에서는 그룹을 생성/편집하고, 각 그룹에 속한 노드 멤버를 관리할 수 있는 기능을 제공합니다.

---

## 노드 그룹 목록
노드 그룹 목록 화면에는 현재 등록된 모든 노드 그룹들이 표 형식으로 나열됩니다. 각 그룹과 관련된 기본 정보 및 관리 기능은 다음과 같습니다:

- **노드 그룹 목록 테이블**: 컬럼으로 노드 그룹 이름, 노드 개수, 유형, 설명, 생성 일시가 표시됩니다.
- **이름**: 노드 그룹의 이름입니다. 클릭하면 해당 노드 그룹 상세 페이지로 이동하여 그룹의 내용과 멤버를 볼 수 있습니다.
- **노드 개수**: 그 그룹에 속해있는 노드의 총 개수입니다. 예를 들어 “5”이라면 해당 그룹에 5개의 물리 머신이 포함되어 있음을 의미합니다.
- **유형**: 그룹의 유형 또는 용도를 나타내는 필드입니다. CloudiA에서는 현재 User(사용자 정의) 타입이 기본으로 제공됩니다. (시스템에서 자동 관리되는 그룹이 따로 있는 경우 유형이 달라질 수 있으나, 일반적으로 “user”로 표시됨)
- **설명**: 그룹 생성 시 입력한 그룹에 대한 설명이 나타납니다. 그룹의 용도나 범위 등을 알기 쉽게 적어둔 메모입니다.
- **생성 일시**: 그 그룹이 만들어진 날짜와 시간입니다.
- **그룹 선택 및 작업**: 노드 그룹도 노드와 마찬가지로 행을 선택하여 상단 툴바의 기능을 사용할 수 있습니다.
- **추가**: 새 노드 그룹을 생성하기 위해 “추가” 버튼을 클릭합니다. 그룹 생성 화면으로 이동하며, 절차는 아래 노드 그룹 생성/편집에서 자세히 다룹니다.
- **편집**: 그룹을 하나만 선택하면 “편집” 버튼이 활성화됩니다. 클릭 시 해당 그룹의 정보 수정 화면으로 이동합니다 (이름, 설명 변경 등).
- **삭제**: 하나 또는 여러 그룹을 선택하면 “삭제” 버튼이 활성화되고, 누르면 선택된 그룹들을 일괄 삭제할 수 있습니다. 삭제 전 확인 창이 뜨며, 그룹 삭제 시 주의: 그룹만 삭제되고, 그룹 내 노드들은 삭제되지 않습니다. 단지 노드들이 그 그룹에 속하지 않게 될 뿐입니다.
- **페이지네이션 및 정렬**: 그룹이 많을 경우 페이지를 넘겨가며 볼 수 있고, 컬럼 헤더를 눌러 그룹 이름순/생성일순 등으로 정렬할 수 있습니다. 기본 정렬은 생성일 역순(최근 생성 그룹이 상단)이며, 사용자가 필요에 따라 변경 가능합니다.

노드 그룹 목록 화면을 통해 관리자는 현재 정의된 그룹들을 일목요연하게 파악하고, 새로운 그룹을 만들거나 불필요한 그룹을 제거하는 등의 관리를 수행할 수 있습니다.

---

## 노드 그룹 생성/편집
노드 그룹 생성 화면에서는 새로운 그룹을 만들고 노드들을 묶을 수 있습니다. 노드 그룹 편집 화면에서는 기존 그룹의 속성(이름, 유형, 설명)을 수정할 수 있습니다. 두 화면은 하나의 양식으로 통합되어 있으며, 편집 시와 생성 시 약간 차이가 있습니다:

- **그룹 이름**: 그룹을 대표하는 이름을 입력합니다. 필수 항목이며 최대 20자까지 입력 가능합니다. 그룹 이름은 다른 그룹과 중복되지 않도록 정하는 것을 권장합니다. (예: “테스트 서버 그룹”, “서울 데이터센터 그룹” 등)
- **유형(Type)**: 그룹의 유형을 선택합니다. 기본 값은 user (사용자 정의 그룹)이며, 드롭다운 목록에서 선택할 수 있습니다. 현재 CloudiA에서는 특별한 경우를 제외하면 user 타입만 사용합니다. (해당 옵션은 고정값으로 보아도 무방합니다)
- **설명**: 그룹에 대한 설명이나 메모를 입력합니다. 최대 200자까지 작성 가능하며, 그룹의 용도나 포함된 노드들의 공통점을 기술해두면 좋습니다. (예: “서울 IDC 물리 서버 모음”, “GPU 장비 전용 그룹” 등)
- **그룹 멤버 노드 선택 (생성 시에만)**: 그룹 생성 시에는 아래쪽 섹션에 노드 추가 섹션이 표시됩니다. 여기서 이 그룹에 포함시킬 노드들을 선택할 수 있습니다. 시스템에 등록된 전체 노드 목록이 제공되며, 체크박스를 통해 원하는 노드를 여러 개 선택할 수 있습니다.

노드는 그룹 당 여러 개를 가질 수 있고, 하나의 노드가 여러 그룹에 속할 수 있는지 여부는 정책에 따르지만 일반적으로 한 노드는 하나의 그룹에만 속하는 구조입니다. (CloudiA에서는 노드 다중 소속을 지원하지 않을 수 있습니다. 만약 이미 다른 그룹에 속한 노드를 선택하면 어떻게 처리되는지 메시지가 뜨거나, 선택 불가능할 수 있습니다.)

노드 목록 필터링/검색: 노드가 많은 경우 이름으로 검색하여 필터링할 수 있는 검색창이 함께 제공됩니다. 이를 이용해 원하는 노드를 빠르게 찾아 선택합니다.

기존 그룹 멤버 (편집 시 참고): 그룹 편집 화면에서는 멤버 선택 섹션이 기본적으로 나타나지 않습니다. 편집 화면은 이름/설명 등 텍스트 정보 수정만 가능하며, 그룹에 속한 노드 멤버 변경은 별도의 “멤버 편집” 기능을 통해 이뤄집니다 (다음 섹션 참조).

- **취소 및 생성/저장**: 화면 하단의 버튼으로 동작을 완료합니다.
  - **취소**: 그룹 목록 화면으로 돌아가며, 입력한 내용은 저장되지 않습니다.
  - **생성/저장**: 유효한 값을 입력한 경우 활성화되며, 클릭하면 그룹 생성 또는 수정 작업을 수행합니다.

새로운 그룹 생성 시, 입력한 정보와 선택한 노드들을 바탕으로 그룹이 만들어지고 성공 메시지가 표시됩니다. 그룹 목록 화면으로 되돌아가면 새 그룹이 리스트에 추가되어 보입니다.

그룹 정보 수정 시에도 저장 후 성공 알림이 뜨고 그룹 목록으로 복귀합니다.

그룹 생성 직후에는 해당 그룹에 선택한 노드들이 포함되어 있으므로, 곧바로 그룹 상세 화면에서 멤버 구성과 정보를 확인할 수 있습니다. 그룹 편집으로 이름이나 설명을 변경한 경우, 변경 사항이 목록과 상세 화면에 반영됩니다.

**Note**: 그룹을 생성할 때 노드를 아무 것도 선택하지 않고 빈 그룹으로 만들 수도 있습니다. 추후에 멤버를 추가할 수 있으므로, 일단 그룹만 만들어 두고 나중에 노드를 배정하는 것도 가능합니다.

---

## 노드 그룹 상세 및 멤버 관리
노드 그룹 이름을 클릭하면 노드 그룹 상세 페이지로 이동합니다. 이 화면에서는 해당 그룹의 정보와, 그 그룹에 속한 노드 멤버 목록을 볼 수 있으며, 그룹 구성원을 수정하는 기능도 제공됩니다. 주요 구성은 아래와 같습니다:

- **그룹 정보 상세**: 화면 상단에 그룹의 기본 정보가 카드 형태로 정리되어 나타납니다. 그룹 이름, 노드 개수, 유형, 설명, 생성 일시 등이 표시되며, 이는 그룹 목록에서 봤던 정보와 동일하지만 읽기 전용으로 확인할 수 있게 해둔 것입니다. 이를 통해 현재 그룹에 몇 대의 노드가 속해있는지, 그룹의 용도를 다시 확인할 수 있습니다.
- **노드 목록 (그룹 멤버)**: 그룹에 속한 노드들의 리스트가 하위 섹션으로 나타납니다. 타이틀로 노드라는 표기가 있으며, 구분선 아래 표 형태로 멤버 노드들을 나열합니다. 컬럼 구성은 일반 노드 목록과 거의 유사하게 노드 이름, 상태, 전원 상태 등 기본적인 정보가 포함됩니다. (CloudiA에서 공통으로 사용하는 노드 목록 컬럼 세트를 재사용)

이 리스트를 통해 해당 그룹에 어떤 노드들이 속해 있는지 일목요연하게 파악할 수 있습니다. 노드가 많다면 페이지당 일정 수로 보여주고 페이지 이동 버튼이 제공됩니다.

노드 이름을 클릭하면 해당 노드 상세 화면으로 바로 이동 가능하여, 그룹 내 특정 노드의 상세 정보를 확인하거나 관리 작업을 이어서 할 수 있습니다.

- **그룹 멤버 편집**: 그룹 상세 페이지에서는 그룹에 속한 노드를 변경(추가 또는 제거)할 수 있는 기능이 있습니다. 노드 섹션 상단의 툴바에 편집 버튼 (혹은 아이콘)이 제공되는데, 화면에서는 **“편집” 대신 “업데이트”**와 같은 라벨로 표시될 수 있습니다.

이 버튼을 클릭하면 멤버 편집 페이지로 전환됩니다. (일부 UI에서는 팝업이나 모달로 열릴 수도 있으나 CloudiA에서는 별도 화면으로 구성되어 있습니다.)

**노드 그룹 멤버 편집 화면**에서는 해당 그룹에 포함시킬 노드를 조정할 수 있습니다:

- **현재 그룹에 속한 노드들**: 편집 화면에 진입하면, 현재 그룹에 포함된 노드들이 선택된 상태로 표시됩니다. (예: 체크박스가 미리 선택됨)
- **노드 선택 리스트**: 시스템의 전체 노드 목록이 나타나며, 이 중 체크된 항목들이 이 그룹의 멤버로 설정됩니다. 사용자는 체크박스를 통해 노드를 추가하거나 제거할 수 있습니다.

기존에 그룹에 없던 노드를 새로 선택하면 그룹에 추가되는 것이고, 기존에 선택되었던 노드의 체크를 해제하면 그룹에서 제외하는 동작입니다.

이때 하나의 노드가 동시에 두 그룹에 속할 수 없는 경우, 이미 다른 그룹 소속인 노드는 선택이 불가능하거나 경고가 나타날 수 있습니다. CloudiA에서는 노드의 다중 그룹 소속을 허용하지 않으므로, 한 그룹에서 제외된 노드는 다른 그룹에 추가할 수 있게 됩니다.

- **취소/저장**: 화면 하단에 취소와 저장 (Save) 버튼이 있습니다.
  - **취소**: 편집을 중단하고 이전 그룹 상세 페이지로 돌아갑니다. 변경 사항은 반영되지 않습니다.
  - **저장**: 현재 선택한 멤버 구성이 그대로 적용됩니다. 저장을 누르면 그룹 멤버 업데이트 API가 실행되어, 그룹의 노드 구성이 방금 선택한 대로 변경됩니다. 성공 시 “노드 그룹 업데이트가 완료되었습니다.”라는 알림과 함께 그룹 상세 화면으로 돌아가며, 멤버 리스트가 업데이트된 내용으로 갱신됩니다.

**팁**: 노드 그룹은 주로 프로젝트별 물리 자원 할당, 권한별 자원 제한, 일괄 모니터링 범주 설정 등에 활용될 수 있습니다. CloudiA에서 노드 그룹을 잘 활용하면 수십~수백 대의 호스트를 그룹별로 묶어 관리 용이성을 높일 수 있습니다. 또한 그룹별 통계나 대시보드 확장 기능이 있는 경우, 그룹 단위로 자원 사용 현황을 파악하는 것도 가능해집니다.
