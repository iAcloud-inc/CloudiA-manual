# 플로팅 IP
**플로팅 IP**는 외부 IP를 특정 자원에 연결해주는 가상 IP 자원입니다.

## 플로팅 IP 목록
### 주요 작업
- `생성`: 새로운 플로팅 IP를 생성합니다.
- `편집`: 선택한 1개 플로팅 IP 설정을 편집할 수 있습니다.
- `삭제`: 선택한 플로팅 IP들을 삭제합니다. (단, 삭제하는 플로팅 IP는 리소스와 미연결 상태여야 합니다.)

### 테이블 컬럼
| 컬럼             | 설명                                                                                                                                     |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| **이름**          | 플로팅 IP의 이름입니다.                                                                                                                         |
| **VPC**          | 플로팅 IP가 속한 VPC입니다.                                                                                                                     |
| **외부 IP**       | 할당된 외부 IP 주소입니다.                                                                                                                       |
| **리소스 타입**    | 플로팅 IP가 현재 연결된 자원을 나타냅니다. <br/> 인스턴스에 연결된 경우 **인스턴스 (이름, ID)** 형식으로, IP 주소에 연결된 경우 **IP 주소(0.0.0.0)** 형식으로 표시되며, 연결되지 않았다면 `-`로 표시됩니다. |
| **생성 일시**     | 플로팅 IP가 생성된 날짜와 시간입니다.                                                                                                                 |

---

## 플로팅 IP 상세
### 상단 요약
- **이름**: 플로팅 IP의 이름입니다.
- **ID**: 플로팅 IP가 부여받은 ID입니다.
- **VPC**: 플로팅 IP가 속한 VPC입니다.
- **외부 IP 주소**: 할당된 외부 IP 주소입니다.
- **설명**: 플로팅 IP에 대한 설명입니다.
- **생성 일시**: 플로팅 IP가 생성된 날짜 및 시간입니다.
- **연결된 리소스**: 현재 연결된 대상과 상태를 확인할 수 있습니다.  
  연결된 자원이 없으면 `-`로 표시되며, 연결된 경우 리소스 유형과 **리소스 이름/ID**, **내부 IP** 등이 표시됩니다.  
  예: 인스턴스 연결 시 → `리소스 타입: 인스턴스`, `이름: vm-01 (ID: 123)` <br>
  예: 인스턴스 연결 시 → `리소스 타입: IP 주소`, `IP 주소: 172.31.1.4`

### 리소스 연결/해제
- 별도의 하단 탭 없이, 연결된 리소스 정보 영역 아래에서 직접 **연결/해제 작업**을 수행합니다.  
  - 연결된 리소스가 없으면 `적용` 버튼이 활성화되어 자원과 연결할 수 있습니다.  
  - 연결된 상태라면 `삭제` 버튼이 활성화되어 현재 연결을 해제할 수 있습니다.

- `적용` 버튼 클릭 시 연결 설정 창이 열립니다.  
  - 대상 유형 선택: `인스턴스` 또는 `IP`  
  - **인스턴스 선택 시**: 해당 VPC 내 인스턴스 목록에서 선택하고, 연결할 **네트워크 인터페이스 IP**를 지정합니다.  
  - **IP 주소 선택 시**: 해당 VPC에서 접근 가능한 IPv4 주소를 직접 입력합니다. (예: `172.31.1.4`)

- `삭제` 버튼 클릭 시 연결 해제 확인 창이 표시되며, 확인 시 플로팅 IP만 분리되고 리소스는 유지됩니다.  
  플로팅 IP 자체는 풀에 남아 있으며, 나중에 다른 자원에 다시 연결할 수 있습니다.

---

## 플로팅 IP 생성
플로팅 IP 생성 화면에서는 외부 IP를 프로젝트 자원에 연결하기 위한 정보를 설정합니다.  
생성 즉시 자원에 연결하거나, 일단 IP만 예약할 수도 있습니다.

### 1. 기본 정보
- **이름**: 플로팅 IP의 이름을 입력합니다.
- **VPC**: 플로팅 IP가 속할 VPC를 선택합니다.
- **외부 IP**: 사용할 외부 IP 주소를 지정합니다.  
  - `자동 할당`: 시스템이 가용 외부 IP를 자동 선택  
  - `수동 할당`: 목록에서 특정 IP를 직접 선택  
- **설명**: 플로팅 IP에 대한 설명입니다. (선택 사항)

### 2. 타겟 리소스 설정 (선택 사항)
- 생성 즉시 특정 자원에 연결하려면 **타겟 리소스 설정** 옵션을 켭니다.
- 활성화 시 아래 입력 항목이 표시됩니다:
  - **대상 유형**: `인스턴스` 또는 `IP`
  - **인스턴스**: 대상이 인스턴스일 경우, 해당 VPC 내 인스턴스를 선택하고 연결할 내부 IP를 지정합니다.
  - **IP 주소**: 특정 IPv4 주소를 직접 입력합니다. (예: `172.31.1.4`)

#### 입력 필드 유효성

| 필드             | 허용 값                         | 검증 규칙                                                                | 비고                     |
|------------------|----------------------------------|---------------------------------------------------------------------------|--------------------------|
| **이름**         | 영문/숫자/`-`/`_` (최대 20자)    | 공백 및 기타 특수문자 불가                                               | 필수                     |
| **VPC**          | 프로젝트 내 VPC                  | 소속 VPC 선택                                                            | 필수                     |
| **외부 IP**       | 자동 / 수동                       | 수동 선택 시 외부 IP 지정 필수                                           | 필수                     |
| **타겟 리소스 설정** | On/Off 토글                      | On 시 대상 유형 선택 필수                                                | 선택                     |
| **타겟 리소스 유형** | 인스턴스 / IP                   | 유형에 따라 입력 방식 변경                                               | 연결 시 필수             |
| **인스턴스**      | VPC 내 인스턴스 목록              | 인스턴스 및 인터페이스 IP 선택                                           | 대상=인스턴스            |
| **IP 주소**       | IPv4 주소                         | 올바른 IPv4 형식인지 검사                                                | 대상=IP 주소             |
| **설명**         | 문자열 (최대 200자)              | 형식 제한 없음                                                            | 선택                     |

> 💡 **참고:** 생성 시 연결 대상 설정을 활성화하면, 생성과 동시에 해당 자원에 플로팅 IP가 연결됩니다.  
> 설정하지 않으면 **연결되지 않은 상태**로 목록에 표시되며, 이후 상세 화면에서 연결할 수 있습니다.

---

## 플로팅 IP 편집
플로팅 IP의 이름과 설명을 변경할 수 있습니다.

| 컬럼   | 설명                                           |
|--------|------------------------------------------------|
| **이름** | 플로팅 IP의 이름을 변경할 수 있습니다.         |
| **설명** | 플로팅 IP의 설명을 용도에 맞게 변경할 수 있습니다. |

---

## 플로팅 IP 삭제
**삭제는 여러 개 동시 선택이 가능**하며, 삭제하려는 플로팅 IP는 반드시 **리소스와 미연결 상태**여야 합니다.  
선택 후 `삭제` 버튼을 누르면 **플로팅 IP 삭제하시겠습니까?** 확인 창이 나타나며, 확인 시 삭제됩니다.

> 💡 **주의사항:**  
> 플로팅 IP가 인스턴스 등에 **연결된 상태라면 삭제되지 않으며**, 경고 메시지가 표시됩니다.  
> 연결된 플로팅 IP를 제거하려면 **상세 화면에서 연결 해제(분리)** 작업을 먼저 수행해야 합니다.
