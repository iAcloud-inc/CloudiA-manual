# 포트 포워딩

## 포트 포워딩 목록
프로젝트 내 모든 포트 포워딩 항목을 확인하고 관리할 수 있습니다.

### 주요 작업
- `생성`: 새로운 포트 포워딩을 생성합니다.
- `편집`: 선택한 1개 포트 포워딩 설정을 편집할 수 있습니다.
- `삭제`: 선택한 포트 포워딩들을 삭제합니다. (삭제 시 하위 규칙들도 함께 삭제됩니다.)

### 테이블 컬럼
포트 포워딩 목록은 다음과 같은 컬럼으로 구성된 표 형태로 표시됩니다:

| 컬럼         | 설명 |
| ------------ | ----- |
| **이름**     | 포트 포워딩의 표시 이름입니다. 클릭 시 해당 포트 포워딩 **상세** 화면으로 이동합니다. |
| **VPC**      | 포트 포워딩이 연결된 VPC 이름입니다. |
| **외부 IP**  | 포트 포워딩에 할당된 외부 IP 주소입니다. |
| **설명**     | 포트 포워딩에 대한 관리자 작성 설명입니다. |
| **생성 일시** | 포트 포워딩이 생성된 날짜와 시간입니다. |

---

## 포트 포워딩 상세

### 상단 요약
- **이름:** 포트 포워딩의 이름입니다.  
- **ID:** 포트 포워딩 리소스의 고유 식별자(ID)입니다.  
- **VPC:** 포트 포워딩이 속한 VPC 이름입니다.  
- **외부 IP:** 이 포트 포워딩에 사용 중인 외부 IP 주소입니다.  
- **설명:** 포트 포워딩에 대한 설명입니다.  
- **생성 일시:** 포트 포워딩이 생성된 날짜 및 시간입니다.

### 하단 탭
아래 **규칙 정보** 섹션에서는 현재 포트 포워딩에 설정된 포트 포워딩 **규칙** 목록이 제공됩니다. 각 규칙은 외부에서 들어오는 특정 포트의 트래픽을 내부 자원으로 전달하는 설정을 의미합니다.  
규칙 정보 표의 우측 상단 **[편집]** 버튼을 클릭하면 규칙들을 수정할 수 있는 **규칙 편집 화면**으로 이동합니다.  
(규칙 편집 가이드는 아래 **[포트 포워딩 생성·편집 > 규칙 설정]** 항목 참고)

#### 하단 탭 요약

| 컬럼            | 설명 |
| --------------- | ----- |
| **ID**          | 포트 포워딩 규칙의 고유 ID입니다. |
| **프로토콜**    | 트래픽 프로토콜 종류입니다. `TCP`, `UDP`, `ALL`로 표시되며 `ALL`은 TCP와 UDP 모든 트래픽을 포함합니다. |
| **외부 포트**   | 외부 IP에서 트래픽을 수신하는 포트 번호입니다. 단일 포트 또는 범위(예: `8000-8080`)로 표시됩니다. |
| **내부 리소스** | 트래픽이 전달될 대상 자원입니다. `인스턴스` 또는 `IP 주소`로 표시되며, 인스턴스인 경우 대상 인스턴스의 이름과 ID가 표시됩니다. |
| **내부 IP**     | 내부 대상 자원의 IP 주소입니다. (인스턴스의 경우 선택된 네트워크 인터페이스 IP) |
| **내부 포트**   | 내부 자원이 트래픽을 수신할 포트 번호입니다. |
| **설명**        | 해당 규칙에 대한 설명입니다. |

---

## 포트 포워딩 생성·편집
포트 포워딩을 새로 생성하거나 기존 포트 포워딩을 편집할 때는 동일한 화면 구성에서 **기본 정보**, **네트워크 정보**, **규칙 설정** 섹션을 통해 필요한 사항을 입력합니다.  
생성 화면은 **“포트 포워딩 생성”**, 편집 화면은 **“포트 포워딩 편집”** 제목으로 표시됩니다.

### 1. 기본 정보
- **이름** (필수): 포트 포워딩의 이름을 지정합니다. 영문 대소문자, 숫자, 하이픈(`-`), 밑줄(`_`)만 사용할 수 있으며 최대 40자까지 입력 가능합니다. 프로젝트 내에서 중복되지 않는 이름을 권장합니다.  
- **설명** (선택): 포트 포워딩에 대한 설명을 입력합니다. 최대 200자까지 가능하며, 포트 포워딩의 용도나 메모 작성에 사용됩니다.
- **VPC** (필수): 포트 포워딩을 설정할 대상 VPC를 선택합니다. 드롭다운 목록에서 프로젝트에 속한 VPC 중 하나를 선택합니다.  
- **외부 IP 할당** (필수): 포트 포워딩에 사용할 외부 IP 주소를 선택합니다. `[자동 할당]`을 선택하면 사용 가능한 외부 IP가 자동으로 배정되며, `[수동 할당]` 선택 시 목록에서 특정 외부 IP를 직접 선택할 수 있습니다. (현재 **미사용** 상태인 외부 IP만 선택 가능)

> ⚠️ 주의  
> - 포트 포워딩 **편집 모드**에서는 VPC와 외부 IP 주소를 수정할 수 없습니다.  
> - 포트 포워딩 **생성** 시 규칙을 추가한 이후에는 VPC 선택을 변경할 수 없습니다. VPC를 변경하려면 먼저 추가된 모든 규칙을 삭제해야 합니다.

---

### 2. 규칙 설정
포트 포워딩에 포함될 규칙을 정의합니다.  
생성 시 규칙 추가는 선택 사항이며, 이후에도 상세 화면의 **규칙 편집 기능**을 통해 수정하거나 추가할 수 있습니다.

#### 주요 작업
- `추가`: 새로운 규칙을 정의합니다. (VPC 선택 후 활성화)
- `편집`: 선택한 1개 규칙을 수정합니다.
- `삭제`: 선택한 규칙들을 삭제합니다.

#### 입력 필드 유효성

| 필드             | 허용 값 및 범위 | 검증 규칙 및 제한 | 비고 |
| ---------------- | --------------- | ------------------ | ---- |
| **프로토콜**     | `TCP` / `UDP` / `ALL` | (필수) `ALL`은 TCP와 UDP를 모두 포함하며 동일한 포트 범위에 대해 중복 프로토콜 규칙을 추가할 수 없습니다. | |
| **외부 포트**    | `1`–`65535` 단일 포트 또는 범위 (`8000-8080` / `8000:8080`) | (필수) 시작 포트 < 끝 포트여야 하며 유효한 형식(`-` 또는 `:` 구분)이어야 합니다. | 단일 외부 포트 → 단일 내부 포트 or 단일 포트와 동일한 크기의 범위만 매핑 가능 |
| **내부 리소스**  | `인스턴스` / `IP 주소` | (필수) 인스턴스 선택 시 VM 선택, IP 주소 선택 시 해당 VPC 내 유효 IPv4 입력 | 편집 시 변경 불가 |
| **내부 IP**      | VPC CIDR 내 IPv4 주소 | 내부 리소스가 IP 주소일 경우 필수. 인스턴스를 선택한 경우 네트워크 인터페이스 중 하나 선택 | 내부 타입 서브넷 IP는 선택 불가 |
| **내부 포트**    | `1`–`65535` 단일 포트 또는 범위 | (선택) 기본값은 외부 포트 동일. 범위 입력 시 외부 포트와 개수가 같아야 함 | |
| **설명**         | 최대 200자 | (선택) 규칙 설명 및 메모 | |

> ⚠️ 주의  
> - 하나의 외부 IP에 대해 **중복되거나 겹치는 포트 범위 규칙**은 생성할 수 없습니다.  
> - `ALL` 프로토콜 규칙이 존재하면 해당 포트 범위에는 `TCP` 또는 `UDP` 규칙을 추가할 수 없습니다.  
> - 외부 포트가 단일 값이면 내부 포트도 비우거나 단일 값만 가능.  
> - 외부 포트가 범위일 경우 내부 포트도 **동일한 범위 개수**이거나 비워서 1:1 매핑이 되어야 합니다.  
> - 외부 포트 단일값 → 내부 포트 범위 설정은 불가능합니다.

---

## 포트 포워딩 삭제
목록 화면에서 단일 또는 여러 항목을 선택해 삭제할 수 있습니다.  
포트 포워딩은 별도 조건 없이 삭제할 수 있습니다.

> ⚠️ **주의:** 삭제는 **복구할 수 없습니다.** 사용 여부를 반드시 확인 후 진행하세요.  
> 💡 참고: 포트 포워딩 삭제 시 해당 포트 포워딩의 모든 **규칙도 함께 삭제**됩니다.
