# SSH 키

## SSH 키 목록
SSH 키 목록을 확인합니다. 

### 주요 작업
- `생성`: 새 SSH 키를 추가합니다. 
- `편집`: 선택한 **1개** SSH 키를 수정합니다. 선택 시 활성화됩니다.
- `삭제`: 선택한 **1개** SSH 키를 삭제합니다. 선택 시 활성화되며, 실제 삭제는 키가 삭제 가능할 때만 진행됩니다.

> 💡 **공통 조건:** 목록은 단일 선택만 허용합니다. 

### 테이블 컬럼
| 컬럼 | 설명                                               |
| --- |--------------------------------------------------|
| **이름** | SSH 키 이름입니다. 클릭 시 상세 화면으로 이동합니다.                 |
| **ID** | SSH 키 고유 ID입니다.                                  |
| **지문** | 공개키 Fingerprint입니다.                              |
| **연결된 인스턴스 수** | 해당 SSH 키가 적용된 가상머신 수 입니다.                        |
| **생성 일시** | SSH 키를 등록한 일시입니다. |

> ⚠️ 연결된 인스턴스 수가 1 이상이면 `삭제`가 불가능합니다. 

---

## SSH 키 생성·편집
> 생성과 편집은 동일한 양식을 사용하며, **편집 모드**에서는 공개키 수정이 불가능합니다.

### 1. SSH 키 정보
- **이름**: 키를 식별할 이름을 입력합니다. 입력 즉시 유효성 검사가 수행됩니다.
- **공개키 (Public Key)**: OpenSSH 형식의 공개키 문자열을 입력합니다. 입력 필드를 통해 최대 길이가 표시되고, 도움말 툴팁으로 세부 입력 규칙을 제공합니다.

### 입력 필드 유효성
| 필드 | 허용 값 | 검증 규칙 | 비고 |
| --- | --- | --- | --- |
| **이름** | 영문 대/소문자, 숫자, `-`, `_` | 최대 80자, 공백 미허용 | **필수** |
| **공개키** | `<type> <base64> [comment]` 단일 행 | - Type: `ssh-ed25519`, `ssh-rsa`<br/>- Base64: 영문자·숫자·`+`·`/`·`=`만 허용<br/>- 공백: 토큰 사이 **1개** 공백만 허용<br/>- 길이: 60~10,240자 | 생성 시에만 입력·수정 가능 |

> 💡 `편집` 화면에서는 서버에서 내려준 공개키 원문을 확인만 가능합니다.

---

## SSH 키 상세

### 상단 요약
- **ID**: SSH 키 고유 ID입니다.
- **이름**: SSH 키 이름입니다.
- **지문(Fingerprint)**: 공개키 Fingerprint 입니다.
- **공개키**: `보기` 버튼을 통해 전체 공개키를 모달에서 확인합니다.
- **연결된 인스턴스 수**: 현재 키가 적용된 가상머신 인스턴스 수를 확인합니다.
- **생성/수정 일시**: 등록된 날짜/시간입니다.

### 하단 탭 
- **연결된 인스턴스**: 이름, ID, IP, 상태, vCPU, 메모리, 생성 일시 정보를 표로 제공합니다.  
  > 💡 **참고:** 인스턴스에 SSH 키 연결은 `인스턴스 생성/편집`을 통해 제공됩니다. 

---

## SSH 키 삭제
1. **SSH 키 선택**: 목록에서 삭제하려는 SSH 키를 선택한 뒤, 합니다. **`삭제`** 버튼을 클릭합니다.
3. **삭제 확인**: SSH 키 **삭제 확인** 창이 나타납니다. 
4. **삭제 실행**: 확인 창에서 삭제 대상 SSH 키를 다시 확인한 뒤 **`삭제`** 버튼을 눌러 진행합니다.

> ⚠️ SSH 키가 인스턴스에 연결되어 있을 경우, "삭제 불가능한 SSH 키" 메시지를 표시하고 **`삭제`** 버튼이 비활성화됩니다.

---

## 인스턴스에 SSH 키 적용
- 인스턴스 **생성/편집** 화면 ▸ `Cloud-init ▸ 인증 방식` 섹션에서 사전 등록된 SSH 키를 다중 선택할 수 있습니다.
- 드롭다운에서 최대 **5개** 키까지만 선택 가능합니다. 
- 선택된 SSH 키는 인스턴스 Cloud-init 설정에 포함되어, 부팅 시 지정한 계정의 `~/.ssh/authorized_keys`에 자동 반영됩니다.

> 💡 Cloud-init 사용자 비밀번호와 SSH 키는 `인증 방식` 내에서 병행 설정할 수 있으며, SSH 키를 사용하려면 해당 프로젝트에 먼저 키를 등록해야 합니다.
